{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lkn4/OneDrive%20-%20University%20of%20Illinois%20-%20Urbana/Desktop/campus-dashboard/frontend/pages/class-suggestions.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo, useEffect } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport classData from \"../data/raw/classes.json\";\r\nimport mergedProfessors from \"../data/processed/merged_professors.json\";\r\n\r\n// Normalize once\r\nconst normalize = (name: string) =>\r\n  name.toLowerCase().replace(/\\./g, \"\").replace(/\\s+/g, \" \").trim();\r\n\r\n// ‚úÖ Only include profs with actual RMP data\r\nconst rmpProfSet = new Set(\r\n  mergedProfessors\r\n    .filter(\r\n      (p) =>\r\n        p.avgRating !== null ||\r\n        p.avgDifficulty !== null ||\r\n        p.wouldTakeAgainPercent !== null ||\r\n        p.numRatings !== null\r\n    )\r\n    .map((p) => `${normalize(p.lastName)}, ${normalize(p.firstName)}`)\r\n);\r\n\r\nexport default function SuggestionsWithRMPFilter() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const [department, setDepartment] = useState(searchParams?.get(\"dept\") || \"\");\r\nconst [professor, setProfessor] = useState(searchParams?.get(\"prof\") || \"\");\r\nconst [maxDifficulty, setMaxDifficulty] = useState(searchParams?.get(\"max\") || \"\");\r\nconst [onlyWithRMP, setOnlyWithRMP] = useState(searchParams?.get(\"onlyWithRMP\") === \"true\");\r\n\r\n\r\n  // üîÅ Update URL on filter change\r\n  useEffect(() => {\r\n    const params = new URLSearchParams();\r\n    if (department) params.set(\"dept\", department);\r\n    if (professor) params.set(\"prof\", professor);\r\n    if (maxDifficulty) params.set(\"max\", maxDifficulty);\r\n    if (onlyWithRMP) params.set(\"onlyWithRMP\", \"true\");\r\n\r\n    router.replace(`?${params.toString()}`, { scroll: false });\r\n  }, [department, professor, maxDifficulty, onlyWithRMP]);\r\n\r\n  const filteredClasses = useMemo(() => {\r\n    return classData.filter((cls) => {\r\n      const matchesDepartment =\r\n        department === \"\" ||\r\n        cls.subject.toLowerCase().includes(department.toLowerCase());\r\n\r\n      const matchesProfessor =\r\n        professor === \"\" ||\r\n        cls.professors.some((p) =>\r\n          p.prof.toLowerCase().includes(professor.toLowerCase())\r\n        );\r\n\r\n      const avgDifficulty = cls.professors.length\r\n        ? cls.professors.reduce((sum, p) => sum + p.avggrade, 0) / cls.professors.length\r\n        : 0;\r\n\r\n      const matchesDifficulty =\r\n        maxDifficulty === \"\" || avgDifficulty <= parseFloat(maxDifficulty);\r\n\r\n      const hasRMP = cls.professors.some((p) =>\r\n        rmpProfSet.has(normalize(p.prof))\r\n      );\r\n\r\n      // üîÅ Only exclude if checkbox is checked\r\n      return (\r\n        matchesDepartment &&\r\n        matchesProfessor &&\r\n        matchesDifficulty &&\r\n        (!onlyWithRMP || hasRMP)\r\n      );\r\n    });\r\n  }, [department, professor, maxDifficulty, onlyWithRMP]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"24px\",\r\n        marginTop: \"80px\",\r\n        maxWidth: \"800px\",\r\n        marginLeft: \"auto\",\r\n        marginRight: \"auto\",\r\n        fontFamily: \"'Poppins', sans-serif\",\r\n        color: \"#ffffffff\",\r\n        background: \"#1b196bff\",\r\n        borderRadius: \"20px\",\r\n      }}\r\n    >\r\n      <h1 style={{ fontSize: \"28px\", fontWeight: \"700\", marginBottom: \"24px\", textAlign: \"center\" }}>\r\n        Class Suggestions\r\n      </h1>\r\n\r\n      {/* Filters */}\r\n      <div style={{ marginBottom: \"30px\", display: \"flex\", flexDirection: \"column\", gap: \"14px\" }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Filter by Department (e.g. CS)\"\r\n          value={department}\r\n          onChange={(e) => setDepartment(e.target.value)}\r\n          style={inputStyle}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Filter by Professor (e.g. Challen)\"\r\n          value={professor}\r\n          onChange={(e) => setProfessor(e.target.value)}\r\n          style={inputStyle}\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"1\"\r\n          max=\"5\"\r\n          step=\"0.1\"\r\n          placeholder=\"Max Difficulty, 1 (easy) - 5 (difficult)\"\r\n          value={maxDifficulty}\r\n          onChange={(e) => setMaxDifficulty(e.target.value)}\r\n          style={inputStyle}\r\n        />\r\n        <label style={{ fontSize: \"16px\", fontWeight: \"600\" }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={onlyWithRMP}\r\n            onChange={() => setOnlyWithRMP((prev) => !prev)}\r\n            style={{ marginRight: \"10px\", transform: \"scale(1.2)\" }}\r\n          />\r\n          Only show classes with RMP data\r\n        </label>\r\n      </div>\r\n\r\n      {/* Results */}\r\n      {(department.trim() !== \"\" || professor.trim() !== \"\") && (\r\n        <>\r\n          {filteredClasses.length === 0 ? (\r\n            <p style={{ fontSize: \"18px\", fontWeight: \"500\", color: \"#fbbf24\" }}>\r\n              No classes match your filters.\r\n            </p>\r\n          ) : (\r\n            <ul style={{ listStyle: \"none\", paddingLeft: 0 }}>\r\n              {filteredClasses.map((cls, i) => {\r\n                const slug = cls.code.toLowerCase().replace(/\\s+/g, \"\");\r\n                const avgGpa =\r\n                  cls.professors.length > 0\r\n                    ? (\r\n                        cls.professors.reduce((sum, p) => sum + p.avggrade, 0) /\r\n                        cls.professors.length\r\n                      ).toFixed(2)\r\n                    : \"N/A\";\r\n\r\n                return (\r\n                  <li\r\n                    key={i}\r\n                    style={{\r\n                      marginBottom: \"24px\",\r\n                      padding: \"16px\",\r\n                      borderRadius: \"10px\",\r\n                      backgroundColor: \"rgba(255 255 255 / 0.15)\",\r\n                      boxShadow: \"0 4px 6px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.06)\",\r\n                    }}\r\n                  >\r\n                    <h2 style={{ fontSize: \"20px\", fontWeight: \"700\", marginBottom: \"6px\" }}>\r\n                      <Link\r\n                        href={`/classes/${slug}`}\r\n                        style={{ color: \"#db8e22ff\", textDecoration: \"none\" }}\r\n                      >\r\n                        {cls.code} ‚Äî {cls.name}\r\n                      </Link>\r\n                    </h2>\r\n                    <p style={{ marginBottom: \"4px\" }}>\r\n                      Department: <strong>{cls.subject}</strong>\r\n                    </p>\r\n                    <p style={{ marginBottom: \"8px\" }}>\r\n                      Avg GPA: <strong>{avgGpa}</strong>\r\n                    </p>\r\n                    <p style={{ fontWeight: \"600\", marginBottom: \"6px\" }}>Professors:</p>\r\n                    <ul style={{ paddingLeft: \"16px\", marginTop: 0 }}>\r\n                      {cls.professors.map((p, j) => (\r\n                        <li key={j} style={{ marginBottom: \"4px\" }}>\r\n                          {p.prof} ‚Äî GPA: {p.avggrade.toFixed(2)}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst inputStyle: React.CSSProperties = {\r\n  padding: \"10px 14px\",\r\n  borderRadius: \"6px\",\r\n  border: \"none\",\r\n  fontSize: \"16px\",\r\n  fontWeight: \"500\",\r\n  outline: \"none\",\r\n  boxShadow: \"0 0 6px rgba(255, 255, 255, 0.2)\",\r\n  backgroundColor: \"rgba(255 255 255 / 0.15)\",\r\n  color: \"#fafafa\",\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQA,iBAAiB;AACjB,MAAM,YAAY,CAAC,OACjB,KAAK,WAAW,GAAG,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,QAAQ,KAAK,IAAI;AAEjE,4CAA4C;AAC5C,MAAM,aAAa,IAAI,IACrB,8GAAA,CAAA,UAAgB,CACb,MAAM,CACL,CAAC,IACC,EAAE,SAAS,KAAK,QAChB,EAAE,aAAa,KAAK,QACpB,EAAE,qBAAqB,KAAK,QAC5B,EAAE,UAAU,KAAK,MAEpB,GAAG,CAAC,CAAC,IAAM,GAAG,UAAU,EAAE,QAAQ,EAAE,EAAE,EAAE,UAAU,EAAE,SAAS,GAAG;AAGtD,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,2HAAA,CAAA,YAAS,AAAD;IACvB,MAAM,eAAe,CAAA,GAAA,2HAAA,CAAA,kBAAe,AAAD;IAEnC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE,cAAc,IAAI,WAAW;IAC5E,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE,cAAc,IAAI,WAAW;IACxE,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE,cAAc,IAAI,UAAU;IAC/E,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE,cAAc,IAAI,mBAAmB;IAGlF,iCAAiC;IACjC,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,SAAS,IAAI;QACnB,IAAI,YAAY,OAAO,GAAG,CAAC,QAAQ;QACnC,IAAI,WAAW,OAAO,GAAG,CAAC,QAAQ;QAClC,IAAI,eAAe,OAAO,GAAG,CAAC,OAAO;QACrC,IAAI,aAAa,OAAO,GAAG,CAAC,eAAe;QAE3C,OAAO,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,EAAE;YAAE,QAAQ;QAAM;IAC1D,GAAG;QAAC;QAAY;QAAW;QAAe;KAAY;IAEtD,MAAM,kBAAkB,CAAA,GAAA,mGAAA,CAAA,UAAO,AAAD,EAAE;QAC9B,OAAO,8FAAA,CAAA,UAAS,CAAC,MAAM,CAAC,CAAC;YACvB,MAAM,oBACJ,eAAe,MACf,IAAI,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;YAE3D,MAAM,mBACJ,cAAc,MACd,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,IACnB,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,UAAU,WAAW;YAGvD,MAAM,gBAAgB,IAAI,UAAU,CAAC,MAAM,GACvC,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE,KAAK,IAAI,UAAU,CAAC,MAAM,GAC9E;YAEJ,MAAM,oBACJ,kBAAkB,MAAM,iBAAiB,WAAW;YAEtD,MAAM,SAAS,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,IAClC,WAAW,GAAG,CAAC,UAAU,EAAE,IAAI;YAGjC,yCAAyC;YACzC,OACE,qBACA,oBACA,qBACA,CAAC,CAAC,eAAe,MAAM;QAE3B;IACF,GAAG;QAAC;QAAY;QAAW;QAAe;KAAY;IAEtD,qBACE,qKAAC;QACC,OAAO;YACL,SAAS;YACT,WAAW;YACX,UAAU;YACV,YAAY;YACZ,aAAa;YACb,YAAY;YACZ,OAAO;YACP,YAAY;YACZ,cAAc;QAChB;;0BAEA,qKAAC;gBAAG,OAAO;oBAAE,UAAU;oBAAQ,YAAY;oBAAO,cAAc;oBAAQ,WAAW;gBAAS;0BAAG;;;;;;0BAK/F,qKAAC;gBAAI,OAAO;oBAAE,cAAc;oBAAQ,SAAS;oBAAQ,eAAe;oBAAU,KAAK;gBAAO;;kCACxF,qKAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,OAAO;;;;;;kCAET,qKAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC5C,OAAO;;;;;;kCAET,qKAAC;wBACC,MAAK;wBACL,KAAI;wBACJ,KAAI;wBACJ,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wBAChD,OAAO;;;;;;kCAET,qKAAC;wBAAM,OAAO;4BAAE,UAAU;4BAAQ,YAAY;wBAAM;;0CAClD,qKAAC;gCACC,MAAK;gCACL,SAAS;gCACT,UAAU,IAAM,eAAe,CAAC,OAAS,CAAC;gCAC1C,OAAO;oCAAE,aAAa;oCAAQ,WAAW;gCAAa;;;;;;4BACtD;;;;;;;;;;;;;YAML,CAAC,WAAW,IAAI,OAAO,MAAM,UAAU,IAAI,OAAO,EAAE,mBACnD;0BACG,gBAAgB,MAAM,KAAK,kBAC1B,qKAAC;oBAAE,OAAO;wBAAE,UAAU;wBAAQ,YAAY;wBAAO,OAAO;oBAAU;8BAAG;;;;;yCAIrE,qKAAC;oBAAG,OAAO;wBAAE,WAAW;wBAAQ,aAAa;oBAAE;8BAC5C,gBAAgB,GAAG,CAAC,CAAC,KAAK;wBACzB,MAAM,OAAO,IAAI,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,QAAQ;wBACpD,MAAM,SACJ,IAAI,UAAU,CAAC,MAAM,GAAG,IACpB,CACE,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE,KACpD,IAAI,UAAU,CAAC,MAAM,AACvB,EAAE,OAAO,CAAC,KACV;wBAEN,qBACE,qKAAC;4BAEC,OAAO;gCACL,cAAc;gCACd,SAAS;gCACT,cAAc;gCACd,iBAAiB;gCACjB,WAAW;4BACb;;8CAEA,qKAAC;oCAAG,OAAO;wCAAE,UAAU;wCAAQ,YAAY;wCAAO,cAAc;oCAAM;8CACpE,cAAA,qKAAC,qHAAA,CAAA,UAAI;wCACH,MAAM,CAAC,SAAS,EAAE,MAAM;wCACxB,OAAO;4CAAE,OAAO;4CAAa,gBAAgB;wCAAO;;4CAEnD,IAAI,IAAI;4CAAC;4CAAI,IAAI,IAAI;;;;;;;;;;;;8CAG1B,qKAAC;oCAAE,OAAO;wCAAE,cAAc;oCAAM;;wCAAG;sDACrB,qKAAC;sDAAQ,IAAI,OAAO;;;;;;;;;;;;8CAElC,qKAAC;oCAAE,OAAO;wCAAE,cAAc;oCAAM;;wCAAG;sDACxB,qKAAC;sDAAQ;;;;;;;;;;;;8CAEpB,qKAAC;oCAAE,OAAO;wCAAE,YAAY;wCAAO,cAAc;oCAAM;8CAAG;;;;;;8CACtD,qKAAC;oCAAG,OAAO;wCAAE,aAAa;wCAAQ,WAAW;oCAAE;8CAC5C,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,kBACtB,qKAAC;4CAAW,OAAO;gDAAE,cAAc;4CAAM;;gDACtC,EAAE,IAAI;gDAAC;gDAAS,EAAE,QAAQ,CAAC,OAAO,CAAC;;2CAD7B;;;;;;;;;;;2BA1BR;;;;;oBAiCX;;;;;;;;;;;;;AAOd;AAEA,MAAM,aAAkC;IACtC,SAAS;IACT,cAAc;IACd,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,SAAS;IACT,WAAW;IACX,iBAAiB;IACjB,OAAO;AACT","debugId":null}}]
}