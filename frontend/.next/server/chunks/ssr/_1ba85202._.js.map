{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lkn4/OneDrive%20-%20University%20of%20Illinois%20-%20Urbana/Desktop/campus-dashboard/frontend/pages/class-suggestions.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport Link from \"next/link\";\r\nimport classData from \"../data/raw/classes.json\";\r\nimport mergedProfessors from \"../data/processed/merged_professors.json\";\r\n\r\n// Normalize once\r\nconst normalize = (name: string) =>\r\n  name.toLowerCase().replace(/\\./g, \"\").replace(/\\s+/g, \" \").trim();\r\n\r\n// âœ… Only include profs with actual RMP data\r\nconst rmpProfSet = new Set(\r\n  mergedProfessors\r\n    .filter(\r\n      (p) =>\r\n        p.avgRating !== null ||\r\n        p.avgDifficulty !== null ||\r\n        p.wouldTakeAgainPercent !== null ||\r\n        p.numRatings !== null\r\n    )\r\n    .map((p) => `${normalize(p.lastName)}, ${normalize(p.firstName)}`)\r\n);\r\n\r\nexport default function SuggestionsWithRMPFilter() {\r\n  const [department, setDepartment] = useState(\"\");\r\n  const [professor, setProfessor] = useState(\"\");\r\n  const [maxDifficulty, setMaxDifficulty] = useState(\"\");\r\n  const [onlyWithRMP, setOnlyWithRMP] = useState(false);\r\n\r\n  const handleInputChange =\r\n    (setter: React.Dispatch<React.SetStateAction<string>>) =>\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      setter(e.target.value);\r\n    };\r\n\r\n  const handleCheckboxChange = () => {\r\n    setOnlyWithRMP((prev) => !prev);\r\n  };\r\n\r\n  const filteredClasses = useMemo(() => {\r\n    return classData.filter((cls) => {\r\n      const matchesDepartment =\r\n        department === \"\" ||\r\n        cls.subject.toLowerCase().includes(department.toLowerCase());\r\n\r\n      const matchesProfessor =\r\n        professor === \"\" ||\r\n        cls.professors.some((p) =>\r\n          p.prof.toLowerCase().includes(professor.toLowerCase())\r\n        );\r\n\r\n      const avgDifficulty = cls.professors.length\r\n        ? cls.professors.reduce((sum, p) => sum + p.avggrade, 0) /\r\n          cls.professors.length\r\n        : 0;\r\n\r\n      const matchesDifficulty =\r\n        maxDifficulty === \"\" || avgDifficulty <= parseFloat(maxDifficulty);\r\n\r\n      // âœ… Check if *any* professor for this class has RMP data\r\n      const hasRMP = cls.professors.some((p) =>\r\n        rmpProfSet.has(normalize(p.prof))\r\n      );\r\n\r\n      return (\r\n        matchesDepartment &&\r\n        matchesProfessor &&\r\n        matchesDifficulty &&\r\n        (!onlyWithRMP || hasRMP)\r\n      );\r\n    });\r\n  }, [department, professor, maxDifficulty, onlyWithRMP]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"24px\",\r\n    marginTop: \"80px\", // ðŸ‘ˆ prevents overlap with navbar\r\n    maxWidth: \"800px\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n        fontFamily: \"'Poppins', sans-serif\",\r\n        color: \"#ffffffff\",\r\n        background:\r\n          \"#1b196bff\",\r\n        borderRadius: \"20px\",\r\n      }}\r\n    >\r\n      <h1 style={{ fontSize: \"28px\", fontWeight: \"700\", marginBottom: \"24px\" , textAlign: \"center\"}}>\r\n        Class Suggestions\r\n      </h1>\r\n\r\n      {/* Filters */}\r\n      <div\r\n        style={{\r\n          marginBottom: \"30px\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: \"14px\",\r\n        }}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Filter by Department (e.g. CS)\"\r\n          value={department}\r\n          onChange={handleInputChange(setDepartment)}\r\n          style={{\r\n            padding: \"10px 14px\",\r\n            borderRadius: \"6px\",\r\n            border: \"none\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"500\",\r\n            outline: \"none\",\r\n            boxShadow: \"0 0 6px rgba(255, 255, 255, 0.2)\",\r\n            backgroundColor: \"rgba(255 255 255 / 0.15)\",\r\n            color: \"#fafafa\",\r\n          }}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Filter by Professor (e.g. Challen)\"\r\n          value={professor}\r\n          onChange={handleInputChange(setProfessor)}\r\n          style={{\r\n            padding: \"10px 14px\",\r\n            borderRadius: \"6px\",\r\n            border: \"none\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"500\",\r\n            outline: \"none\",\r\n            boxShadow: \"0 0 6px rgba(255, 255, 255, 0.2)\",\r\n            backgroundColor: \"rgba(255 255 255 / 0.15)\",\r\n            color: \"#fafafa\",\r\n          }}\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          min=\"1\"\r\n          max=\"5\"\r\n          step=\"0.1\"\r\n          placeholder=\"Max Difficulty, 1 (easy) - 5 (difficult)\"\r\n          value={maxDifficulty}\r\n          onChange={handleInputChange(setMaxDifficulty)}\r\n          style={{\r\n            padding: \"10px 14px\",\r\n            borderRadius: \"6px\",\r\n            border: \"none\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"500\",\r\n            outline: \"none\",\r\n            boxShadow: \"0 0 6px rgba(255, 255, 255, 0.2)\",\r\n            backgroundColor: \"rgba(255 255 255 / 0.15)\",\r\n            color: \"#fafafa\",\r\n          }}\r\n        />\r\n        <label style={{ fontSize: \"16px\", fontWeight: \"600\" }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={onlyWithRMP}\r\n            onChange={handleCheckboxChange}\r\n            style={{ marginRight: \"10px\", transform: \"scale(1.2)\" }}\r\n          />\r\n          Only show classes with RMP data\r\n        </label>\r\n      </div>\r\n\r\n      {/* Results */}\r\n      {(department.trim() !== \"\" || professor.trim() !== \"\") && (\r\n        <>\r\n          {filteredClasses.length === 0 ? (\r\n            <p style={{ fontSize: \"18px\", fontWeight: \"500\", color: \"#fbbf24\" }}>\r\n              No classes match your filters.\r\n            </p>\r\n          ) : (\r\n            <ul style={{ listStyle: \"none\", paddingLeft: 0 }}>\r\n              {filteredClasses.map((cls, i) => {\r\n                const slug = cls.code.toLowerCase().replace(/\\s+/g, \"\");\r\n                const avgGpa =\r\n                  cls.professors.length > 0\r\n                    ? (\r\n                        cls.professors.reduce((sum, p) => sum + p.avggrade, 0) /\r\n                        cls.professors.length\r\n                      ).toFixed(2)\r\n                    : \"N/A\";\r\n\r\n                return (\r\n                  <li\r\n                    key={i}\r\n                    style={{\r\n                      marginBottom: \"24px\",\r\n                      padding: \"16px\",\r\n                      borderRadius: \"10px\",\r\n                      backgroundColor: \"rgba(255 255 255 / 0.15)\",\r\n                      boxShadow:\r\n                        \"0 4px 6px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.06)\",\r\n                    }}\r\n                  >\r\n                    <h2\r\n                      style={{\r\n                        fontSize: \"20px\",\r\n                        fontWeight: \"700\",\r\n                        marginBottom: \"6px\",\r\n                      }}\r\n                    >\r\n                      <Link\r\n                        href={`/classes/${slug}`}\r\n                        style={{ color: \"#db8e22ff\", textDecoration: \"none\" }}\r\n                      >\r\n                        {cls.code} â€” {cls.name}\r\n                      </Link>\r\n                    </h2>\r\n                    <p style={{ marginBottom: \"4px\" }}>\r\n                      Department: <strong>{cls.subject}</strong>\r\n                    </p>\r\n                    <p style={{ marginBottom: \"8px\" }}>\r\n                      Avg GPA: <strong>{avgGpa}</strong>\r\n                    </p>\r\n                    <p style={{ fontWeight: \"600\", marginBottom: \"6px\" }}>\r\n                      Professors:\r\n                    </p>\r\n                    <ul style={{ paddingLeft: \"16px\", marginTop: 0 }}>\r\n                      {cls.professors.map((p, j) => (\r\n                        <li key={j} style={{ marginBottom: \"4px\" }}>\r\n                          {p.prof} â€” GPA: {p.avggrade.toFixed(2)}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}